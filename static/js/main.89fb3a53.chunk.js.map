{"version":3,"sources":["redux/dialogs-reducer.js","redux/app-reducer.js","components/NewMessage/NewMessage.jsx","components/Nav/Nav.jsx","components/Header/Header.jsx","components/Header/HeaderContainer.jsx","pages/Dialogs/Dialog/DialogBody/DialogBody.jsx","pages/Dialogs/Dialog/Dialog.jsx","pages/Dialogs/Dialog/DialogCotainer.jsx","components/Footer/Footer.jsx","App.js","serviceWorker.js","redux/sidebar-reducer.js","redux/redux-store.js","index.js","redux/auth-reducer.js","components/Header/Header.module.css","redux/auth-selector.js","components/Nav/Nav.module.css","components/Preloader/Preloader.jsx","redux/profile-reducer.js","redux/users-reducer.js","redux/dialogs-selector.js","components/SendMessageToUser/SendMessageToUser.jsx","assets/img/logo.png","api/api.js"],"names":["ADD_MESSAGE","DELETE_MESSAGE","ADD_DIALOG","initialState","isFetching","dialogsData","dialogsMessage","newMessages","addMessage","newMessageBody","type","deleteMessageSuccess","messageId","addDialog","dialog","userId","setDialogs","allDialogs","toggleIsFetching","setNewMessagesSuccess","count","getDialogs","dispatch","a","dialogsAPI","response","data","deleteMessage","resultCode","addDialogUser","dialogs","items","sendMessage","body","startChatting","refreshDialog","message","dialogsReducer","state","action","filter","m","id","init","navLinkMenu","linkName","linkTo","appReducer","NewMessage","this","props","className","React","Component","connect","dialogsPage","Nav","links","css","main_nav","map","link","key","item","to","item_link","activeClassName","active","Header","isAuth","login","logoutUser","header__body","header__logo","src","logo","alt","login_block","login_authUser","login_authUser_minus","onClick","HeaderContainer","mapDispatchToProps","getIsAuthSelector","getLoginSelector","DialogBody","senderName","senderId","viewed","addedAt","Dialog","index","authoraizedUserId","SendMessageToUser","match","params","DialogCotainer","length","Preloader","getDialogSelector","getUserIdSelector","Footer","DialogsContainer","lazy","UsersContainer","Music","ProfileContainer","LoginContainer","App","initApp","col","Suspense","fallback","path","component","exact","from","promise","getAuthUserData","Promise","all","then","compose","withRouter","app","Boolean","window","location","hostname","sidebarReducer","reducers","combineReducers","profilePage","profileReducer","sidebar","usersPage","usersReducer","auth","authReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","__store__","renderEntireTree","ReactDOM","render","document","getElementById","subscribe","navigator","serviceWorker","ready","registration","unregister","catch","error","console","email","captcha","setUserData","authAPI","me","loginUser","password","rememberMe","getCaptchaUrl","messages","securityAPI","сaptcha","url","logout","module","exports","getCaptchaSelector","ADD_POST","SET_PROFILE_USER","SET_STATUS","DELETE_POST","postId","postsData","userProfile","status","addPostActionCreator","newPostText","setProfileUser","setStatus","profileStatus","getProfileUserThunkCreator","usersAPI","getUserProfile","getProfileStatus","profileAPI","getStatus","updateStatus","newStatus","editStatus","saveUserAvatar","img","saveAvatar","photos","saveProfile","profile","likesCount","post","FOLLOW","UNFOLLOW","SET_USERS","users","pageSize","totalCountUsers","currentPage","requestInProgress","follow","unfollow","setUsers","setTotalCountUsers","toggleInRequestProgress","isRequest","getUsersThunkCreator","getUsers","totalCount","onChangePageThunkCreator","currrentPage","unfollowThunkCreator","unfollowUser","followThunkCreator","followUser","u","followed","getDialogsMessageSelector","getDialogsDataSelector","Number","recipientId","onSubmit","value","newMessage","handleSubmit","name","axiosInst","axios","create","baseURL","withCredentials","headers","get","warn","getProfile","delete","put","FormData","append"],"mappings":"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","file":"static/js/main.89fb3a53.chunk.js","sourcesContent":["import { dialogsAPI } from '../api/api'\r\n\r\nconst ADD_MESSAGE = 'dialogs-reducer/ADD_MESSAGE'\r\nconst DELETE_MESSAGE = 'dialogs-reducer/DELETE_MESSAGE'\r\nconst ADD_DIALOG = 'dialogs-reducer/ADD_DIALOG'\r\nconst SET_ALL_ACTIVE_DIALOGS = 'dialogs-reducer/SET_ALL_ACTIVE_DIALOGS'\r\nconst TOGGLE_IS_FETCHING = 'dialogs-reducer/TOGGLE_IS_FETCHING'\r\nconst SET_NEW_MESSAGES_SUCCESS = 'dialogs-reducer/SET_NEW_MESSAGES_SUCCESS'\r\n\r\nlet initialState = {\r\n\tisFetching: true,\r\n\tdialogsData: [],\r\n\tdialogsMessage: [],\r\n\tnewMessages: 0\r\n}\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase ADD_MESSAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdialogsMessage: [...state.dialogsMessage, action.newMessageBody]\r\n\t\t\t}\r\n\r\n\t\tcase DELETE_MESSAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdialogsMessage: state.dialogsMessage.filter(m => m.id !== action.messageId)\r\n\t\t\t}\r\n\r\n\t\tcase ADD_DIALOG:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdialogsMessage: [...state.dialogsMessage, ...action.dialog]\r\n\t\t\t}\r\n\r\n\t\tcase SET_ALL_ACTIVE_DIALOGS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdialogsData: action.allDialogs\r\n\t\t\t}\r\n\r\n\t\tcase TOGGLE_IS_FETCHING:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisFetching: action.isFetching\r\n\t\t\t}\r\n\r\n\t\tcase SET_NEW_MESSAGES_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnewMessages: action.count\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\r\n\t}\r\n}\r\n\r\nexport const addMessage = (newMessageBody) => ({type: ADD_MESSAGE, newMessageBody})\r\nexport const deleteMessageSuccess = (messageId) => ({type: DELETE_MESSAGE, messageId})\r\nexport const addDialog = (dialog, userId) => ({type: ADD_DIALOG, dialog, userId})\r\nexport const setDialogs = (allDialogs) => ({type: SET_ALL_ACTIVE_DIALOGS, allDialogs})\r\nexport const toggleIsFetching = (isFetching) => ({type: TOGGLE_IS_FETCHING, isFetching})\r\nexport const setNewMessagesSuccess = (count) => ({type: SET_NEW_MESSAGES_SUCCESS, count})\r\n\r\nexport const getDialogs = (isFetching) => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await dialogsAPI.allDialogs()\t\r\n\t\tconst newMessages = await dialogsAPI.newMessages()\r\n\t\tdispatch(setDialogs(response.data))\r\n\t\tdispatch(setNewMessagesSuccess(newMessages.data))\r\n\t\tdispatch(toggleIsFetching(isFetching))\r\n\t}\r\n}\r\n\r\nexport const deleteMessage = (messageId) => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await dialogsAPI.deleteMessage(messageId)\t\t\r\n\t\tif (response.data.resultCode === 0) {\r\n\t\t\tdispatch(deleteMessageSuccess(messageId))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const addDialogUser = (userId) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(toggleIsFetching(true))\r\n\t\tconst response = await dialogsAPI.dialogs(userId)\t\r\n\t\tdispatch(addDialog(response.data.items, userId))\r\n\t\tdispatch(toggleIsFetching(false))\r\n\t}\r\n}\r\n\r\nexport const sendMessage = (userId, body) => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await dialogsAPI.sendMessage(userId, body)\r\n\t\tconst refreshDialog = await\tdialogsAPI.startChatting(userId)\r\n\t\tif (response.data.resultCode === 0 && refreshDialog.data.resultCode === 0){\r\n\t\t\tdispatch(addMessage(response.data.data.message))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default dialogsReducer","import { getAuthUserData } from \"./auth-reducer\"\r\n\r\nconst INIT_SUCCESS = 'INIT_SUCCESS'\r\n\r\nlet initialState = {\r\n\tinit: false,\r\n\tnavLinkMenu: [\r\n\t\t{linkName: 'Profile', linkTo: 'profile'},\r\n\t\t{linkName: 'Dialogs', linkTo: 'dialogs'},\r\n\t\t{linkName: 'News', linkTo: 'news'},\r\n\t\t{linkName: 'Setting', linkTo: 'setting'},\r\n\t\t{linkName: 'Users', linkTo: 'users'}\r\n\t]\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase INIT_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tinit: true\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\nexport const setInit = () => ({type: INIT_SUCCESS})\r\n\r\nexport const initApp = () => (dispatch) => {\r\n\tconst promise = dispatch(getAuthUserData())\r\n\tPromise.all([promise])\r\n\t\t.then(() => {\r\n\t\t\tdispatch(setInit())\r\n\t\t})\r\n\t\r\n}\r\n\r\nexport default appReducer","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport './NewMessage.css'\r\n\r\n\r\nclass NewMessage extends React.Component {\r\n\trender(){\r\n\t\tif(this.props.newMessages) {\r\n\t\t\treturn <span className=\"newMessage\"> новых: {this.props.newMessages}</span>\r\n\t\t}\r\n\t\treturn null\r\n\t}\t\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tnewMessages: state.dialogsPage.newMessages\r\n})\r\n\r\nexport default connect(mapStateToProps, null)(NewMessage)\r\n","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport css from './Nav.module.css'\r\nimport NewMessage from '../NewMessage/NewMessage'\r\n\r\n\r\nfunction Nav({ links }) {\r\n\treturn (\r\n\t\t<nav className={css.main_nav}>\r\n\t\t\t{links.map( link => \r\n\t\t\t\t<div key={link.linkName} className={css.item}>\r\n\t\t\t\t\t<NavLink \r\n\t\t\t\t\t\tto={'/' + link.linkTo}\r\n\t\t\t\t\t\tclassName={css.item_link}\r\n\t\t\t\t\t\tactiveClassName={css.active}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span>{link.linkName} </span>\r\n\t\t\t\t\t\t{link.linkName === 'Dialogs' ? <NewMessage /> : null}\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</div>\r\n\t\t\t)}\t\t\r\n\t\t</nav>\t\r\n\t)\r\n}\r\n\r\nexport default Nav\r\n","import React from 'react'\r\nimport { Container, Row, Col } from 'bootstrap-4-react'\r\nimport css from  './Header.module.css'\r\nimport { NavLink } from 'react-router-dom'\r\n\r\nimport logo from './../../assets/img/logo.png'\r\n\r\nfunction Header({ isAuth, login, logoutUser }) {\r\n\treturn (\r\n\t\t<header>\r\n\t\t\t<Container>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<div className={css.header__body}>\r\n\t\t\t\t\t\t\t<NavLink to=\"/\" className={css.header__logo}>\r\n\t\t\t\t\t\t\t\t<img src={logo} alt=\"logo\"/>\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t<div className={css.login_block}>\r\n\t\t\t\t\t\t\t\t{isAuth\r\n\r\n\t\t\t\t\t\t\t\t\t?   <div className={css.login_authUser}>\r\n\t\t\t\t\t\t\t\t\t\t\t<NavLink to={'/profile'}>{login}</NavLink> \r\n\t\t\t\t\t\t\t\t\t\t\t<span className={css.login_authUser_minus}>---</span>\t \r\n\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" onClick={logoutUser}>LOGOUT</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t:   <NavLink to='/login'>\r\n\t\t\t\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Container>\t\t\t\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nexport default Header\r\n","import React from 'react'\r\nimport Header from './Header'\r\nimport { logoutUser } from '../../redux/auth-reducer'\r\nimport { connect } from 'react-redux'\r\nimport { getIsAuthSelector, getLoginSelector } from '../../redux/auth-selector'\r\n\r\nclass HeaderContainer extends React.Component {\t\r\n\r\n\trender(){\r\n\t\treturn <Header {...this.props} />\r\n\t}\t\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisAuth: getIsAuthSelector(state),\r\n\tlogin: getLoginSelector(state)\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n\tlogoutUser\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderContainer)\r\n","import React from 'react'\r\nimport './DialogBody.css'\r\nimport DoneAllIcon from '@material-ui/icons/DoneAll'\r\n\r\nfunction DialogBody({ id, body, senderName, senderId, viewed, addedAt, userId, deleteMessage }) {\r\n\treturn (\r\n\t\t<div className=\"dialog__item\">\r\n\r\n\t\t\t<div className=\"dialog__itemTitle\">\r\n\t\t\t\t<span className=\"dialog__userName\">\r\n\t\t\t\t\t{userId === senderId ? 'Вы' : senderName}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"dialog__publicDate\">\r\n\t\t\t\t\t{addedAt}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className={\"dialog__viewed\" + (viewed ? \" viewed\" : \"\")}>\r\n\t\t\t\t\t<DoneAllIcon />\t\r\n\t\t\t\t</span>\t\t\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"dialog__itemText\">\r\n\t\t\t\t{body}\r\n\t\t\t</div>\r\n\r\n\t\t\t<span \r\n\t\t\t\tclassName=\"dialog_messageDel\"\r\n\t\t\t\tonClick={() => deleteMessage(id)}\r\n\t\t\t>\r\n\t\t\t\tудалить\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default DialogBody\r\n","import React from 'react'\r\nimport DialogBody from './DialogBody/DialogBody'\r\nimport SendMessageToUser from '../../../components/SendMessageToUser/SendMessageToUser'\r\n\r\n\r\nfunction Dialog(props) {\r\n\treturn (\r\n\t\t<div className=\"dialog__container\">\t\t\r\n\t\t\t<div className=\"dialog\">\t\t\t\t\r\n\t\t\t\t{props.dialog.map(\r\n\t\t\t\t\t(dialog, index) => <DialogBody \r\n\t\t\t\t\t\t\t\t\t\t\tkey={dialog.id + index} \r\n\t\t\t\t\t\t\t\t\t\t\t{...dialog}\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteMessage={props.deleteMessage}\r\n\t\t\t\t\t\t\t\t\t\t\tuserId={props.authoraizedUserId}/>\r\n\t\t\t\t)}\t\t\t\t\t\r\n\t\t\t</div>\t\t\r\n\r\n\t\t\t<SendMessageToUser \r\n\t\t\t\t\t\tuserId={props.match.params.userId} \r\n\t\t\t\t\t\tsendMessage={props.sendMessage}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Dialog\r\n","import React from 'react'\r\nimport './DialogContainer.css'\r\nimport Preloader from '../../../components/Preloader/Preloader'\r\nimport { connect } from 'react-redux'\r\nimport { addDialogUser, sendMessage, deleteMessage } from '../../../redux/dialogs-reducer'\r\nimport { getDialogSelector } from '../../../redux/dialogs-selector'\r\nimport { getUserIdSelector } from '../../../redux/auth-selector'\r\nimport Dialog from './Dialog'\r\n\r\nexport class DialogCotainer extends React.Component {\r\n\r\n\tcomponentDidMount(){\r\n\t\tif (this.props.dialog.length === 0) {\r\n\t\t\tconst userId = this.props.match.params.userId\t\r\n\t\t\tthis.props.addDialogUser(userId)\r\n\t\t}\t\t\t\r\n\t}\r\n\r\n\trender() {\t\t\r\n\t\tif (this.props.isFetching) {\r\n\t\t\treturn <Preloader />\r\n\t\t}\t\t\t\t\t\r\n\t\treturn <Dialog {...this.props} />\t\t\t\t\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state, props) => ({\r\n\tisFetching: state.dialogsPage.isFetching,\r\n\tdialog: getDialogSelector(state, props),\r\n\tauthoraizedUserId: getUserIdSelector(state)\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n\taddDialogUser,\r\n\tsendMessage,\r\n\tdeleteMessage\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DialogCotainer) \r\n","import React from 'react'\r\nimport { Container, Row, Col } from 'bootstrap-4-react'\r\nimport'./Footer.css'\r\n\r\nfunction Footer() {\r\n\treturn (\r\n\t\t<footer>\r\n\t\t\t<Container>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<div className=\"footer__title\">\r\n\t\t\t\t\t\t\t<span>Welcome to the demo-social-network it-kamasutra!</span>\r\n\t\t\t\t\t\t\t<span>developed be Khvorov Alexandr</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Container>\r\n\t\t</footer>\r\n\t)\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react'\nimport { Container, Row, Col } from 'bootstrap-4-react'\nimport { Route, withRouter, Switch, Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { initApp } from './redux/app-reducer'\n\nimport './App.css'\n\nimport Nav from './components/Nav/Nav'\nimport HeaderContainer from './components/Header/HeaderContainer'\nimport Preloader from './components/Preloader/Preloader'\nimport DialogCotainer from './pages/Dialogs/Dialog/DialogCotainer'\nimport Footer from './components/Footer/Footer'\n\nconst DialogsContainer = React.lazy(() => import('./pages/Dialogs/DialogsContainer'))\nconst UsersContainer = React.lazy(() => import('./pages/Users/UsersContainer'))\nconst Music = React.lazy(() => import('./pages/Music/Music'))\nconst ProfileContainer = React.lazy(() => import('./pages/Profile/ProfileContainer'))\nconst LoginContainer = React.lazy(() => import('./pages/Login/LoginContainer'))\n\nclass App extends React.Component{\n\n\tcomponentDidMount(){\n\t\tthis.props.initApp()\n\t}\n\n\trender(){\n\n\t\tif (!this.props.init) {\n\t\t\treturn <Preloader />\n\t\t}\n\n\t\treturn (\n\t\t\t<>\t\t\t\t\n\t\t\t\t<HeaderContainer />\n\t\t\t\t\t\n\t\t\t\t<Container className=\"sections\">\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col col=\"md-4\">\n\t\t\t\t\t\t\t<Nav links={this.props.navLinkMenu}/>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col col=\"md-8\">\n\t\t\t\t\t\t\t<React.Suspense fallback={<div>Загрузка...</div>}>\n\t\t\t\t\t\t\t\t<Switch>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<Route path='/profile/:userId?' component={ProfileContainer}/>\n\t\t\t\t\t\t\t\t\t<Route exact path='/dialogs' component={DialogsContainer}/>\n\t\t\t\t\t\t\t\t\t<Route path='/dialogs/:userId' component={DialogCotainer}/>\n\t\t\t\t\t\t\t\t\t<Route path='/users' component={UsersContainer}/>\n\t\t\t\t\t\t\t\t\t<Route path='/login' component={LoginContainer}/>\n\t\t\t\t\t\t\t\t\t<Route path='/music/:musicName?' component={Music}/>\n\t\t\t\t\t\t\t\t\t<Redirect from=\"/\" to='/profile'></Redirect>\t\n\t\t\t\t\t\t\t\t</Switch>\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</React.Suspense>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\t\t\t\t\n\t\t\t\t</Container>\t\t\t\n\n\t\t\t\t<Footer />\t\t\t\n\t\t\t</>\n\t\t)\n\t}\t\n}\n\nconst mapStateToProps = (state) => ({\n\tinit: state.app.init,\n\tnavLinkMenu: state.app.navLinkMenu\n})\n\nconst mapDispatchToProps = {\n\tinitApp\n}\n\nexport default compose (\n\twithRouter,\n\tconnect(mapStateToProps, mapDispatchToProps)\n)(App)","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","let initialState = {}\r\n\r\nconst sidebarReducer = (state = initialState, action) => {\r\n\treturn state\r\n}\r\n\r\nexport default sidebarReducer","import { createStore, combineReducers, applyMiddleware, compose  } from 'redux'\r\nimport thunkMiddleware from 'redux-thunk'\r\n\r\nimport profileReducer from './profile-reducer'\r\nimport dialogsReducer from './dialogs-reducer'\r\nimport sidebarReducer from './sidebar-reducer'\r\nimport usersReducer from './users-reducer'\r\nimport appReducer from './app-reducer'\r\nimport authReducer from './auth-reducer'\r\n\r\nconst reducers = combineReducers({\r\n\tprofilePage: profileReducer,\r\n\tdialogsPage: dialogsReducer,\r\n\tsidebar: sidebarReducer,\r\n\tusersPage: usersReducer,\r\n\tauth: authReducer,\r\n\tapp: appReducer\r\n})\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)))\r\n\r\nwindow.__store__ = store\r\n\r\nexport default store","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker'\nimport { HashRouter } from 'react-router-dom'\n\nimport store from './redux/redux-store'\nimport { Provider } from 'react-redux'\n\n\nconst renderEntireTree = (store) => {\n\tReactDOM.render(\t\n\t\t<HashRouter>\n\t\t\t<Provider store={store}>\n\t\t\t\t<App />\n\t\t\t</Provider>\n\t\t</HashRouter>,\n\t\tdocument.getElementById('root')\n\t)\n}\n\nrenderEntireTree(store)\n\nstore.subscribe(() => {\n\trenderEntireTree(store)\n})\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { authAPI, securityAPI, dialogsAPI } from \"../api/api\"\r\nimport { setNewMessagesSuccess, setDialogs } from './dialogs-reducer'\r\n\r\nconst SET_USER_DATA = 'auth/SET_USER_DATA'\r\nconst SET_USER_URL_SUCCESS = 'auth/SET_USER_URL_SUCCESS'\r\n\r\nlet initialState = {\r\n\tid: null,\r\n\temail: null,\r\n\tlogin: null,\r\n\tisAuth: false,\r\n\tcaptcha: null\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_USER_DATA:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.data\r\n\t\t\t}\r\n\r\n\t\tcase SET_USER_URL_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcaptcha: action.captcha\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\nexport const setUserData = (id, login, email, isAuth = true, captcha = null) => ({type: SET_USER_DATA, data: {id, login, email, isAuth, captcha}})\r\nexport const setUserCaptchaSuccess = (captcha) => ({type: SET_USER_URL_SUCCESS, captcha})\r\n\r\nexport const getAuthUserData = () => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await authAPI.me()\t\t\r\n\t\tif (response.resultCode === 0) {\r\n\t\t\tconst {id, login, email} = response.data\r\n\t\t\tdispatch(setUserData(id, login, email))\t\t\t\t\r\n\t\t}\t\t\t\t\r\n\t}\r\n}\r\n\r\nexport const loginUser = (email, password, rememberMe = false, captcha = null) => {\r\n\treturn async (dispatch) => {\t\t\r\n\t\tconst response = await authAPI.login(email, password, rememberMe, captcha)\t\t\t\r\n\t\tif (response.data.resultCode === 0) {\r\n\t\t\tconst newMessages = await dialogsAPI.newMessages()\r\n\t\t\tdispatch(getAuthUserData())\t\t\t\r\n\t\t\tdispatch(setNewMessagesSuccess(newMessages.data))\t\t\r\n\t\t} else {\r\n\t\t\tif (response.data.resultCode === 10) {\r\n\t\t\t\tdispatch(getCaptchaUrl())\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn response.data.messages\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getCaptchaUrl = () => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await securityAPI.сaptcha()\r\n\t\tdispatch(setUserCaptchaSuccess(response.data.url))\r\n\t}\r\n}\r\n\r\nexport const logoutUser = () => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await authAPI.logout()\t\t\r\n\t\tif (response.data.resultCode === 0) {\r\n\t\t\tdispatch(setUserData(null, null, null, false))\r\n\t\t\tdispatch(setNewMessagesSuccess(null))\r\n\t\t\tdispatch(setDialogs([]))\r\n\t\t}\t\r\n\t}\r\n}\r\n\r\n\r\n\r\nexport default authReducer","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header__body\":\"Header_header__body__FFYWo\",\"header__logo\":\"Header_header__logo__1ETZb\",\"login_block\":\"Header_login_block__3dzPh\",\"login_authUser\":\"Header_login_authUser__1hngA\"};","export const getIsAuthSelector = (state) => {\r\n\treturn state.auth.isAuth\r\n}\r\n\r\nexport const getUserIdSelector = (state) => {\r\n\treturn state.auth.id\r\n}\r\n\r\nexport const getLoginSelector = (state) => {\r\n\treturn state.auth.login\r\n}\r\n\r\nexport const getCaptchaSelector = (state) => {\r\n\treturn state.auth.captcha\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_nav\":\"Nav_main_nav__1DmQD\",\"item\":\"Nav_item__96rLj\",\"item_link\":\"Nav_item_link__1p_Xk\",\"active\":\"Nav_active__XSt-p\"};","import React from 'react'\r\nimport './Preloader.css'\r\n\r\nfunction Preloader() {\r\n\treturn <div className=\"preloader\">\r\n\t\t<div className=\"lds-roller\"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>\r\n\t</div>\r\n}\r\n\r\nexport default Preloader\r\n","import { usersAPI, profileAPI } from \"../api/api\"\r\n\r\nconst ADD_POST = 'profile-reducer/ADD_POST'\r\nconst SET_PROFILE_USER = 'profile-reducer/SET_PROFILE_USER_POST'\r\nconst SET_STATUS = 'profile-reducer/SET_STATUS'\r\nconst DELETE_POST = 'profile-reducer/DELETE_POST'\r\nconst TOGGLE_IS_FETCHING = 'profile-reducer/TOGGLE_IS_FETCHING'\r\nconst SET_PROFILE_PHOTOS = 'profile-reducer/SET_PROFILE_PHOTOS'\r\n\r\nlet postId = 0\r\n\r\nlet initialState = {\r\n\tpostsData: [],\r\n\tuserProfile: null,\r\n\tisFetching: false,\r\n\tstatus: ''\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase ADD_POST:\r\n\t\t\tpostId++\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpostsData: [...state.postsData, {id: postId, message: action.newPostText, likesCount: 0}]\r\n\t\t\t}\r\n\r\n\t\tcase DELETE_POST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpostsData: state.postsData.filter( post => post.id !== action.postId )\r\n\t\t\t}\r\n\r\n\t\tcase SET_PROFILE_USER:\r\n\t\t\treturn {\r\n\t\t\t\t...state, userProfile: action.userProfile\r\n\t\t\t}\r\n\r\n\t\tcase SET_STATUS:\r\n\t\t\treturn {\r\n\t\t\t\t...state, status: action.profileStatus\r\n\t\t\t}\r\n\r\n\t\tcase SET_PROFILE_PHOTOS:\r\n\t\t\treturn {\r\n\t\t\t\t...state, userProfile: {...state.userProfile, photos: action.photos}\r\n\t\t\t}\r\n\r\n\t\tcase TOGGLE_IS_FETCHING:\r\n\t\t\treturn {\r\n\t\t\t\t...state, isFetching: action.isFetching\r\n\t\t\t}\r\n\t\t\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\nexport const addPostActionCreator = (newPostText) => ({type: ADD_POST, newPostText})\r\nexport const deletePostActionCreator = (postId) => ({type: DELETE_POST, postId})\r\nexport const setProfileUser = (userProfile) => ({type: SET_PROFILE_USER, userProfile})\r\nexport const setStatus = (profileStatus) => ({type: SET_STATUS, profileStatus})\r\nexport const toggleIsFetching = (isFetching) => ({type: TOGGLE_IS_FETCHING, isFetching})\r\nexport const setProfilePhoto = (photos) => ({type: SET_PROFILE_PHOTOS, photos})\r\n\r\nexport const getProfileUserThunkCreator = (userId) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(toggleIsFetching(true))\t\t\r\n\t\tconst response = await usersAPI.getUserProfile(userId)\t\r\n\t\tdispatch(setProfileUser(response))\r\n\t\tdispatch(toggleIsFetching(false))\r\n\t}\r\n}\r\n\r\nexport const getProfileStatus = (userId) => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await profileAPI.getStatus(userId)\r\n\t\tdispatch(setStatus(response.data))\t\t\r\n\t}\r\n}\r\n\r\nexport const updateStatus = (newStatus) => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await profileAPI.editStatus(newStatus)\r\n\t\tif (response.data.resultCode === 0) {\r\n\t\t\tdispatch(setStatus(newStatus))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const saveUserAvatar = (img) => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await profileAPI.saveAvatar(img)\t\r\n\t\tif (response.data.resultCode === 0) {\r\n\t\t\tdispatch(setProfilePhoto(response.data.data.photos))\t\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const saveProfile = (profile) => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await profileAPI.saveProfile(profile)\r\n\t\tif (response.data.resultCode === 0) {\r\n\t\t\tdispatch(setProfileUser(profile))\r\n\t\t\treturn true\t\t\t\r\n\t\t} else {\r\n\t\t\treturn response.data.messages\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nexport default profileReducer","import { usersAPI } from \"../api/api\"\r\n\r\nconst FOLLOW = 'users-reducer/FOLLOW'\r\nconst UNFOLLOW = 'users-reducer/UNFOLLOW'\r\nconst SET_USERS = 'users-reducer/SET_USERS'\r\nconst SET_CURRENT_PAGE = 'users-reducer/SET_CURRENT_PAGE'\r\nconst SET_TOTAL_COUNT_USERS = 'users-reducer/SET_TOTAL_COUNT_USERS'\r\nconst TOGGLE_IS_FETCHING = 'users-reducer/TOGGLE_IS_FETCHING'\r\nconst TOGGLE_IN_REQUEST_PROGRESS = 'users-reducer/TOGGLE_IN_REQUEST_PROGRESS'\r\n\r\nconst initialState = {\r\n\tusers: [],\r\n\tpageSize: 20, //число отображаемых пользователей\r\n\ttotalCountUsers: 0, //общее число пользователей в БД\r\n\tcurrentPage: 1,\r\n\tisFetching: true,\r\n\trequestInProgress: []\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase FOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: state.users.map( u => {\r\n\t\t\t\t\tif (u.id === action.userId) {\r\n\t\t\t\t\t\treturn {...u, followed: true}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn u\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\tcase UNFOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: state.users.map( u => {\r\n\t\t\t\t\tif (u.id === action.userId) {\r\n\t\t\t\t\t\treturn {...u, followed: false}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn u\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\tcase SET_USERS:\r\n\t\t\treturn {\r\n\t\t\t\t...state, users: action.users\r\n\t\t\t}\r\n\r\n\t\tcase SET_CURRENT_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...state, currentPage: action.currrentPage\r\n\t\t\t}\r\n\r\n\t\tcase SET_TOTAL_COUNT_USERS:\r\n\t\t\treturn {\r\n\t\t\t\t...state, totalCountUsers: action.count\r\n\t\t\t}\r\n\r\n\t\tcase TOGGLE_IS_FETCHING:\r\n\t\t\treturn {\r\n\t\t\t\t...state, isFetching: action.isFetching\r\n\t\t\t}\r\n\r\n\t\tcase TOGGLE_IN_REQUEST_PROGRESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\trequestInProgress: action.isRequest \r\n\t\t\t\t\t? [...state.requestInProgress, action.userId]\r\n\t\t\t\t\t: state.requestInProgress.filter(id => id !== action.userId)\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\r\n\t}\r\n}\r\n\r\nexport const follow = (userId) => ({type: FOLLOW, userId})\r\nexport const unfollow = (userId) => ({type: UNFOLLOW, userId})\r\nexport const setUsers = (users) => ({type: SET_USERS, users})\r\nexport const setCurrentPage = (currrentPage) => ({type: SET_CURRENT_PAGE, currrentPage})\r\nexport const setTotalCountUsers = (count) => ({type: SET_TOTAL_COUNT_USERS, count})\r\nexport const toggleIsFetching = (isFetching) => ({type: TOGGLE_IS_FETCHING, isFetching})\r\nexport const toggleInRequestProgress = (isRequest, userId) => ({type: TOGGLE_IN_REQUEST_PROGRESS, isRequest, userId})\r\n\r\nexport const getUsersThunkCreator = (currentPage, pageSize) => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await usersAPI.getUsers(currentPage, pageSize)\t\t\r\n\t\tdispatch(toggleIsFetching(false))\r\n\t\tdispatch(setUsers(response.items))\r\n\t\tdispatch(setTotalCountUsers(response.totalCount))\t\r\n\t}\r\n}\r\n\r\nexport const onChangePageThunkCreator = (currentPage, pageSize) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(setCurrentPage(currentPage))\r\n\t\tdispatch(toggleIsFetching(true))\r\n\t\tconst response = await usersAPI.getUsers(currentPage, pageSize)\t\t\t\r\n\t\tdispatch(toggleIsFetching(false))\r\n\t\tdispatch(setUsers(response.items))\r\n\t\tdispatch(setTotalCountUsers(response.totalCount))\t\r\n\t}\r\n}\r\n\r\nexport const unfollowThunkCreator = (userId) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(toggleInRequestProgress(true, userId))\r\n\t\tconst response = await usersAPI.unfollowUser(userId)\t\t\r\n\t\tif (response.resultCode === 0) {\r\n\t\t\tdispatch(unfollow(userId))\r\n\t\t}\r\n\t\tdispatch(toggleInRequestProgress(false, userId))\t\r\n\t}\r\n}\r\n\r\nexport const followThunkCreator = (userId) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(toggleInRequestProgress(true, userId))\r\n\t\tconst response = await usersAPI.followUser(userId)\t\r\n\t\tif (response.resultCode === 0) {\r\n\t\t\tdispatch(follow(userId))\r\n\t\t}\r\n\t\tdispatch(toggleInRequestProgress(false, userId))\r\n\t\r\n\t}\r\n}\r\n\r\nexport default usersReducer","export const getDialogsMessageSelector = (state) => {\r\n\treturn state.dialogsPage.dialogsMessage\r\n}\r\n\r\nexport const getDialogsDataSelector = (state) => {\r\n\treturn state.dialogsPage.dialogsData\r\n}\r\n\r\nexport const dialogItemSelector = (state) => {\r\n\treturn state.dialogsPage.dialogsMessage\r\n}\r\n\r\nexport const getDialogSelector = (state, props) => {\r\n\treturn state.dialogsPage.dialogsMessage.filter( dialog => Number(dialog.recipientId) === Number(props.match.params.userId))\t \r\n}","import React from 'react'\r\nimport { Form, Field } from 'react-final-form'\r\n\r\nfunction SendMessageToUser({ userId, sendMessage}) {\r\n\r\n\tconst onSubmit = (value) => {\t\r\n\t\tsendMessage(userId, value.newMessage)\r\n\t\treturn value.newMessage = ''\r\n\t}\r\n\r\n\treturn (\t\r\n\t\t<Form \r\n\t\t\tonSubmit={onSubmit}\r\n\t\t\trender={({ handleSubmit }) => (\r\n\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t<Field name='newMessage' component='textarea'/>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button className=\"btn btn-outline-primary btn-sm\">Написать сообщение</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t)}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport default SendMessageToUser\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.d51eb85f.png\";","import axios from 'axios'\r\n\r\nconst axiosInst = axios.create({\r\n\tbaseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n\twithCredentials: true,\r\n\theaders: {\r\n\t\t'API-KEY': '5ba345f8-29a4-4d9f-83bf-efaa59c593a9'\r\n\t}\r\n})\r\n\r\nexport const usersAPI = {\r\n\t\r\n\tgetUsers(currentPage = 1, pageSize = 10){\r\n\t\treturn axiosInst\r\n\t\t\t\t.get(`users?page=${currentPage}&count=${pageSize}`)\r\n\t\t\t\t.then(response => response.data)\r\n\t},\r\n\r\n\tgetUserProfile(userId){\r\n\t\tconsole.warn('Этот метод устаревший, используйте более новый метод из profileAPI')\r\n\t\treturn profileAPI.getProfile(userId)\r\n\t},\r\n\r\n\tfollowUser(userId){\r\n\t\treturn axiosInst\r\n\t\t\t\t.post(`follow/${userId}`)\r\n\t\t\t\t.then(response => response.data)\r\n\t},\r\n\t\r\n\tunfollowUser(userId){\r\n\t\treturn axiosInst\r\n\t\t\t\t.delete(`follow/${userId}`)\r\n\t\t\t\t.then(response => response.data)\r\n\t}\r\n}\r\n\r\nexport const profileAPI = {\r\n\tgetProfile(userId){\r\n\t\treturn axiosInst.get(`profile/${userId}`)\r\n\t\t\t\t.then(response => response.data)\r\n\t},\r\n\r\n\tgetStatus(userId){\r\n\t\treturn axiosInst.get(`profile/status/${userId}`)\r\n\t},\r\n\r\n\teditStatus(newStatus){\r\n\t\treturn axiosInst.put(`profile/status`, {status: newStatus})\r\n\t},\r\n\r\n\tsaveAvatar(img){\r\n\t\tconst data = new FormData()\r\n\t\tdata.append('image', img)\r\n\t\treturn axiosInst.put(`profile/photo`, data)\r\n\t},\r\n\r\n\tsaveProfile(profile){\r\n\t\treturn axiosInst.put(`profile`, profile)\r\n\t}\r\n}\r\n\r\nexport const authAPI = {\r\n\r\n\tme(){\r\n\t\treturn axiosInst\r\n\t\t\t\t.get(`auth/me`)\r\n\t\t\t\t.then(response => response.data)\r\n\t},\r\n\r\n\tlogin(email, password, rememberMe, captcha){\r\n\t\treturn axiosInst.post(`auth/login`, {email, password, rememberMe, captcha})\r\n\t},\r\n\r\n\tlogout(){\r\n\t\treturn axiosInst.delete(`auth/login`)\r\n\t}\r\n}\r\n\r\nexport const securityAPI = {\r\n\tсaptcha(){\r\n\t\treturn axiosInst.get(`security/get-captcha-url`)\t\t\t\r\n\t}\r\n}\r\n\r\nexport const dialogsAPI = {\r\n\tallDialogs(){\r\n\t\treturn axiosInst.get(`dialogs`)\t\t\t\r\n\t},\r\n\r\n\tdialogs(userId){\r\n\t\treturn axiosInst.get(`dialogs/${userId}/messages`)\t\t\t\r\n\t},\r\n\r\n\tstartChatting(userId){\r\n\t\treturn axiosInst.put(`dialogs/${userId}`)\t\t\r\n\t},\r\n\r\n\tsendMessage(userId, body){\r\n\t\treturn axiosInst.post(`dialogs/${userId}/messages`, {body})\t\t\t\r\n\t},\r\n\r\n\tnewMessages(){\r\n\t\treturn axiosInst.get(`dialogs/messages/new/count`)\t\t\t\r\n\t},\r\n\r\n\tdeleteMessage(messageId){\r\n\t\treturn axiosInst.delete(`dialogs/messages/${messageId}`)\t\t\t\r\n\t}\r\n}\r\n\r\n\r\n\r\n"],"sourceRoot":""}